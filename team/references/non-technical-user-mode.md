# 非技术用户友好模式 (Non-Technical User Friendly Mode)

## 1. 概述

### 1.1 目标用户
- **没有代码背景的用户**：从未写过代码的用户
- **业务导向的用户**：关注结果而非技术实现细节的用户
- **需要掌控感的用户**：希望理解并掌控整个过程，但不了解技术细节的用户

### 1.2 核心目标
- **完全理解**：让用户完全理解正在发生什么
- **掌控感**：让用户感觉自己始终掌控局面
- **安全感**：建立信任，减少焦虑
- **透明度**：一切都在用户可见范围内

### 1.3 基本原则
```
通俗语言 > 技术术语
类比说明 > 抽象概念
可视化 > 文字描述
选择权 > 自动执行
```

---

## 2. 通俗语言转换 (TechToPlainTranslator)

### 2.1 TypeScript 接口定义

```typescript
interface TechToPlainTranslator {
  // 代码错误 → 通俗解释
  translateError(error: string): string;

  // 技术术语 → 日常类比
  translateTerm(term: string): string;

  // 进度报告 → 用户理解版本
  translateProgress(progress: AgentProgress): UserProgress;
}

interface AgentProgress {
  currentStep: string;
  completedSteps: string[];
  totalSteps: number;
  errors: Error[];
  confidence: number;
}

interface UserProgress {
  // 用户友好的任务描述
  friendlyTaskName: string;

  // 用阶段名称替代技术步骤
  currentPhase: 'planning' | 'building' | 'testing' | 'finishing';

  // 进度百分比
  percentComplete: number;

  // 当前在做什么（通俗语言）
  whatImDoing: string;

  // 为什么这样做（价值说明）
  whyThisMatters: string;

  // 预计还要多久
  estimatedTimeRemaining: string;

  // 置信度（用词通俗）
  confidenceLevel: 'just-trying' | 'pretty-sure' | 'very-confident';

  // 是否需要用户注意
  needsAttention: boolean;

  // 注意事项（如果有）
  attentionMessage?: string;
}
```

### 2.2 错误转换示例

#### 代码错误 → 通俗解释

| 原始错误 | 通俗解释 |
|---------|---------|
| `TypeError: Cannot read property 'x' of undefined` | "我想要访问某个信息，但这个信息不存在。就像你想翻开书的第10页，但这本书只有8页。" |
| `SyntaxError: Unexpected token` | "代码写法有点问题，就像句子语法错误。让我重新检查一下。" |
| `404 Not Found` | "我要找的资源不存在，就像网页链接失效了。让我换一个方式。" |
| `500 Internal Server Error` | "服务器遇到了问题，就像商店临时关门。我稍后再试。" |
| `Connection refused` | "无法连接到目标服务，就像电话打不通。可能是服务暂时不可用。" |
| `EACCES: Permission denied` | "我没有权限执行这个操作，就像你需要钥匙才能打开某个房间。" |
| `ENOSPC: No space left on device` | "存储空间不足了，就像你的硬盘已经装满了。" |

#### API 错误 → 通俗解释

| 原始错误 | 通俗解释 |
|---------|---------|
| `Rate limit exceeded` | "请求太频繁了，服务让我稍等一下。我会放慢节奏。" |
| `Authentication failed` | "身份验证失败，就像密码不对。让我检查一下登录信息。" |
| `Timeout` | "等待时间太长了，就像打电话对方一直不接。我再试一次。" |
| `Invalid request` | "请求格式有问题，就像信封地址写错了。让我重新整理。" |

#### 数据库错误 → 通俗解释

| 原始错误 | 通俗解释 |
|---------|---------|
| `Duplicate entry` | "这个数据已经存在了，就像你想注册一个已被使用的用户名。" |
| `Foreign key constraint fails` | "无法删除这条记录，因为其他地方还在使用它，就像你不能删除正在被引用的文档。" |
| `Connection lost` | "数据库连接断开了，就像网络突然中断。我尝试重新连接。" |

### 2.3 技术术语转换示例

| 技术术语 | 日常类比 |
|---------|---------|
| **API** | "就像餐厅的服务员，你告诉服务员你想要什么，服务员去厨房（服务器）帮你拿。" |
| **数据库** | "就像一个超级强大的文件柜，可以快速找到你要的任何文件。" |
| **缓存** | "就像你的书桌，放最常用的东西，这样不用每次都去书架找。" |
| **延迟** | "就像寄信需要时间，数据从一个地方到另一个地方也需要时间。" |
| **Bug** | "就像程序里的一个小错误，可能导致结果不对。" |
| **部署** | "就像把做好的菜端上桌，让客人可以享用。" |
| **重构** | "就像重新整理衣柜，让东西更好找，但衣服还是那些衣服。" |
| **依赖** | "就像做菜需要的食材，没有食材就没法做菜。" |
| **环境变量** | "就像不同场合穿不同衣服，开发环境和正式环境需要不同的配置。" |
| **提交 (Commit)** | "就像在玩游戏时存档，这样出错了可以回到这个点。" |

---

## 3. 可视化进度面板

### 3.1 标准进度面板

```
┌─────────────────────────────────────────────────────────────────┐
│  📋 任务: 给网站添加登录功能                                     │
├─────────────────────────────────────────────────────────────────┤
│  当前进度: ████████████░░░░░░░░ 60%                            │
├─────────────────────────────────────────────────────────────────┤
│  阶段 1 [✓] 了解需求        已完成                             │
│  阶段 2 [✓] 制定计划        已完成                             │
│  阶段 3 [→] 正在构建        进行中...                           │
│  阶段 4 [ ] 测试功能        等待开始                            │
│  阶段 5 [ ] 完成收尾        等待开始                            │
├─────────────────────────────────────────────────────────────────┤
│  🤔 我现在正在做什么:                                          │
│  正在创建用户登录的界面和验证逻辑                               │
│                                                                 │
│  💡 为什么这很重要:                                            │
│  这是确保只有你才能看到你账户信息的关键步骤                      │
│                                                                 │
│  ⏱️  预计还需要: 约10-15分钟                                    │
│                                                                 │
│  👍 我的把握程度: 比较确定                                      │
├─────────────────────────────────────────────────────────────────┤
│  [1] 继续    [2] 暂停    [3] 重新开始    [4] 我有问题    [5] 确认完成 │
└─────────────────────────────────────────────────────────────────┘
```

### 3.2 等待用户输入面板

```
┌─────────────────────────────────────────────────────────────────┐
│  ⏸️  已暂停，等待你的指示                                       │
├─────────────────────────────────────────────────────────────────┤
│  当前进度: ████████████░░░░░░░░ 60%                            │
│                                                                 │
│  📝 目前完成的内容:                                             │
│  ✓ 登录界面已设计好                                             │
│  ✓ 用户名和密码验证功能已添加                                   │
│                                                                 │
│  📋 接下来需要:                                                 │
│  • 添加"记住我"功能                                             │
│  • 添加"忘记密码"功能                                           │
│  • 测试登录流程是否顺畅                                         │
│                                                                 │
│  💬 你想让我继续，还是有什么要调整的?                            │
├─────────────────────────────────────────────────────────────────┤
│  [1] 继续完成    [2] 修改方案    [3] 跳过某些步骤    [4] 我有问题  │
└─────────────────────────────────────────────────────────────────┘
```

### 3.3 完成确认面板

```
┌─────────────────────────────────────────────────────────────────┐
│  🎉 差不多完成了!                                               │
├─────────────────────────────────────────────────────────────────┤
│  完成度: ███████████████████ 100%                              │
│                                                                 │
│  ✅ 已完成的功能:                                               │
│  • 用户可以输入用户名和密码登录                                  │
│  • 密码输入时会被隐藏（显示为圆点）                              │
│  • 登录成功后会跳转到主页                                        │
│  • 登录失败会显示友好的提示信息                                  │
│                                                                 │
│  📸 这是目前的登录界面样子:                                     │
│  ┌─────────────────────────┐                                   │
│  │     欢迎回来            │                                   │
│  │                         │                                   │
│  │  用户名: [__________]  │                                   │
│  │                         │                                   │
│  │  密码:   [__________]  │                                   │
│  │                         │                                   │
│  │    [ 登 录 ]           │                                   │
│  │                         │                                   │
│  │  忘记密码?              │                                   │
│  └─────────────────────────┘                                   │
│                                                                 │
│  ❓ 这是你要的效果吗? 有什么地方需要修改?                        │
├─────────────────────────────────────────────────────────────────┤
│  [1] 完美，就这样!    [2] 需要修改    [3] 我有问题    [4] 放弃这个方案 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 4. 一键操作

### 4.1 操作定义

| 编号 | 操作 | 说明 | 使用场景 |
|-----|------|------|---------|
| **1** | **继续** | 让团队继续当前工作，不需要任何修改 | 用户查看进度后满意，想让团队继续 |
| **2** | **暂停** | 暂停工作，展示当前进度 | 用户想看看进展，或者有其他事情要处理 |
| **3** | **重新开始** | 放弃当前进度，从头开始 | 用户发现方向不对，或者改变了主意 |
| **4** | **我有个问题** | 允许用户提问，暂停工作 | 用户有疑问需要解答 |
| **5** | **完成确认** | 用户确认功能符合要求 | 完成后让用户确认是否满意 |

### 4.2 操作响应模板

#### 继续 (操作 1)
```
好的，我继续工作...

[显示简洁的进度更新]
```

#### 暂停 (操作 2)
```
已暂停。这是目前的进度：

[显示详细的进度面板]

你想要:
- 继续工作?
- 了解更多细节?
- 做些调整?
```

#### 重新开始 (操作 3)
```
好的，我会重新开始。但在此之前...

[显示即将丢弃的内容]

你确定要重新开始吗?
- 是的，重新开始
- 不，让我再想想
```

#### 我有个问题 (操作 4)
```
请问你有什么问题? 我来解答：

[等待用户输入]
```

#### 完成确认 (操作 5)
```
太好了! 让我帮你收尾...

[显示最终确认]
```

---

## 5. 智能提醒

### 5.1 需求可能被误解时的提醒

```
┌─────────────────────────────────────────────────────────────────┐
│  ⚠️  等一下，我想确认一下...                                    │
├─────────────────────────────────────────────────────────────────┤
│  我理解你想要: [A]                                             │
│  但你原本说的是: [B]                                           │
│                                                                 │
│  这两个有点不一样。让我解释一下区别:                             │
│  • [A] 会...                                                   │
│  • [B] 会...                                                   │
│                                                                 │
│  你实际上想要哪一个?                                            │
│  [1] 我想要 [A]    [2] 我想要 [B]    [3] 让我重新解释           │
└─────────────────────────────────────────────────────────────────┘
```

**关键原则:**
- 不指责用户
- 清晰展示差异
- 给出简单选择
- 保持友好语气

### 5.2 进度停滞时的提醒

```
┌─────────────────────────────────────────────────────────────────┐
│  🤔 遇到一点小问题...                                           │
├─────────────────────────────────────────────────────────────────┤
│  我已经尝试了几种方法，但还没成功。别担心，这很正常。             │
│                                                                 │
│  我正在尝试: [描述当前尝试的方法]                                │
│                                                                 │
│  你想要:                                                        │
│  [1] 让我再试几次（通常能解决）                                  │
│  [2] 换一个方法                                                 │
│  [3] 先跳过这个，做其他的                                        │
│  [4] 告诉我具体发生了什么                                        │
└─────────────────────────────────────────────────────────────────┘
```

**关键原则:**
- 不使用技术术语
- 不让用户感到恐慌
- 提供明确的选项
- 保持透明（说明正在尝试什么）

### 5.3 即将完成时的提醒

```
┌─────────────────────────────────────────────────────────────────┐
│  🎯 快完成了!                                                   │
├─────────────────────────────────────────────────────────────────┤
│  我已经完成了: [列出已完成的部分]                                │
│                                                                 │
│  最后还需要你确认一件事: [具体需要确认的内容]                     │
│                                                                 │
│  这是你想要的效果吗?                                            │
│  [1] 是的，就这样    [2] 需要调整    [3] 让我看看效果            │
└─────────────────────────────────────────────────────────────────┘
```

**关键原则:**
- 提前告知即将完成
- 列出已完成的成果
- 请求最终确认
- 给出调整选项

---

## 6. 安全保障说明

### 6.1 通俗语言解释

#### 数据保护
```
你的数据很安全，就像银行的保险柜一样:

🔐 只有你能访问
   → 你的项目文件只在你自己的电脑上，我不会给别人

📝 我不会偷偷上传
   → 所有操作都在你的电脑上进行，不会偷偷上传到网上

🚪 你随时可以停止
   → 就像你可以随时关门一样，你可以随时让我停止工作
```

#### 回滚保护
```
出问题了不用担心，就像有"撤销"功能:

💾 每次重要改动前自动保存
   → 就像游戏存档，出错可以回到之前的状态

↩️ 可以随时回到之前的状态
   → 如果不满意，可以撤销刚才的改动

📅 保留多个版本
   → 就像文档的历史记录，可以看之前的版本
```

#### 人工确认
```
重要操作会让你确认，就像支付前的确认:

❓ 修改前会先问你要不要改
   → 不会偷偷改你的文件

👀 完成后让你确认是否满意
   → 你说了算，你觉得行才算行

🛑 随时可以暂停
   → 不确定的时候可以暂停，看清楚再决定
```

#### 透明度
```
你可以看到我在做什么，就像透明的玻璃墙:

📋 实时显示进度
   → 你可以随时看到我正在做什么

💬 用你能听懂的话解释
   → 不用技术术语，用日常语言

❓ 随时可以问问题
   → 有任何疑问都可以问我
```

### 6.2 安全提示位置

```
┌─────────────────────────────────────────────────────────────────┐
│  🛡️  你的安全                                                  │
├─────────────────────────────────────────────────────────────────┤
│  • 你的文件只在你电脑上，不会被上传                               │
│  • 重要改动前会征得你的同意                                       │
│  • 不满意可以随时撤销                                            │
│  • 你可以随时暂停或停止                                          │
└─────────────────────────────────────────────────────────────────┘
```

---

## 7. 用户沟通模板

### 7.1 开始任务时的沟通

```
你好！我明白了，你想让我帮你 [任务描述]。

让我先确认一下我的理解是否正确:
你想达到的效果是: [用通俗语言描述目标]

这是你想要的吗?
- 是的，开始吧
- 不对，让我重新说明
```

### 7.2 进度更新时的沟通

```
进展顺利！

✅ 已完成: [已完成的部分]
🔄 正在做: [正在做的部分]
⏳ 接下来: [下一步要做的]

预计还需要大约: [时间估计]

需要我继续吗? 还是你想先看看具体情况?
```

### 7.3 遇到问题时的沟通

```
遇到一个小问题，不过别担心，我来处理。

问题是什么: [通俗描述问题]

我打算这样解决: [描述解决方法]

这需要: [说明影响，如"多花几分钟"/"尝试另一个方法"]

你想要:
- 让我按这个方法试试
- 先停下来，让我了解更多
```

### 7.4 完成任务时的沟通

```
完成了！🎉

我帮你实现了: [列出实现的功能]

你可以这样使用: [使用说明]

还有什么需要调整的吗?
```

### 7.5 需要更多信息时的沟通

```

我需要了解更多信息才能继续。

关于 [主题]，我需要知道:
1. [问题1，用通俗语言]
2. [问题2，用通俗语言]

你可以简单告诉我，或者用你自己的话描述也行。
```

---

## 8. 实施指南

### 8.1 启用条件

当检测到以下情况时，自动启用非技术用户模式:

1. 用户明确表示"没有代码背景"
2. 用户使用通俗语言而非技术术语描述需求
3. 用户频繁问"这是什么意思"
4. 用户表示"我不懂技术"

### 8.2 实施检查清单

- [ ] 所有技术术语都有通俗解释
- [ ] 每个操作都有进度显示
- [ ] 用户提供简单选择而非复杂决策
- [ ] 错误信息友好且易懂
- [ ] 用户始终感觉掌控局面
- [ ] 重要的操作前都征得用户同意
- [ ] 完成后请求用户确认

### 8.3 禁止事项

在非技术用户模式下，严禁:

- ❌ 使用未经解释的技术术语
- ❌ 显示原始错误堆栈
- ❌ 假设用户理解技术概念
- ❌ 不通知就执行重要操作
- ❌ 让用户做复杂的技术决策
- ❌ 用"bug"、"API"等术语而不解释

---

## 9. 示例对话

### 9.1 理想的对话流程

```
用户: 我想给我的网站加个登录功能

助手: 好的，我来帮你添加登录功能！

让我先了解一下:
1. 你有用户管理系统吗？（就是存储用户名和密码的地方）
2. 你希望登录成功后跳转到哪里？

用户: 我不太懂第一个问题

助手: 没问题，我用简单的方式解释一下:

用户管理系统就像一个"会员名单"，记录着:
- 谁可以登录（用户名）
- 他们的密码是什么
- 其他信息（比如邮箱）

如果你还没有，我可以帮你创建一个基本的。

你想要:
- [1] 创建一个简单的用户管理系统
- [2] 我已经有了，继续下一步

用户: 选择1

助手: 好的，我来帮你创建。

[显示进度面板，开始工作]

...持续更新进度...

助手: 完成了！让我给你看看效果...

[展示完成确认面板]

```

### 9.2 避免的对话方式

```
❌ 不好的方式:
用户: 我想加登录功能
助手: 好的，我需要先检查你的auth中间件配置，
      然后实现JWT token验证，还需要设置bcrypt
      密码哈希...

✅ 好的方式:
用户: 我想加登录功能
助手: 好的！让我了解一下你的情况，
      然后用你能理解的方式解释我会做什么。
```

---

## 10. 总结

非技术用户友好模式的核心是:

> **让用户感到舒适、理解、有掌控感**

不是简化技术，而是用用户能理解的方式表达技术。
不是降低质量，而是让用户能看到并理解整个过程。
不是替用户做决定，而是让用户在理解的基础上做选择。

---

*最后更新: 2025年2月*
*维护者: team-v4-developer*
