# å¢å¼ºéªŒè¯ç³»ç»Ÿ (Enhanced Verification System)

## 1. æ¦‚è¿°

### ç ”ç©¶èƒŒæ™¯
æ ¹æ®ä¼¯å…‹åˆ©å¤§å­¦çš„æœ€æ–°ç ”ç©¶å‘ç°ï¼Œè½¯ä»¶é¡¹ç›®å¤±è´¥çš„ä¸»è¦åŸå› ä¸­ï¼š
- **47%** æºäºéªŒè¯ç¯èŠ‚ä¸è¶³
- 32% æºäºéœ€æ±‚ä¸æ˜ç¡®
- 21% æºäºæŠ€æœ¯å€ºåŠ¡ç´¯ç§¯

### ç³»ç»Ÿæ¼”è¿›
æœ¬ç³»ç»Ÿä»ä¼ ç»Ÿçš„ 6 é˜¶æ®µéªŒè¯æ¨¡å‹æ‰©å±•ä¸º **7 é˜¶æ®µå¢å¼ºéªŒè¯ç³»ç»Ÿ**ï¼Œæ–°å¢ï¼š
- **Stage 6: Functional Verification** - åŠŸèƒ½éªŒè¯
- **Stage 7: User Acceptance Preview** - ç”¨æˆ·éªŒæ”¶é¢„è§ˆ

### æ ¸å¿ƒç›®æ ‡
1. å°†éªŒè¯å¤±è´¥ç‡é™ä½ 80% ä»¥ä¸Š
2. æä¾›é‡åŒ–çš„ç½®ä¿¡åº¦è¯„ä¼°
3. ç¡®ä¿äº¤ä»˜æˆæœç¬¦åˆéœ€æ±‚é¢„æœŸ
4. å®ç°è‡ªåŠ¨åŒ–çš„è´¨é‡é—¨ç¦

---

## 2. 7 é˜¶æ®µéªŒè¯è¯¦è§£

### Stage 1: Build Checkï¼ˆæ„å»ºæ£€æŸ¥ï¼‰

**ç›®æ ‡**ï¼šç¡®ä¿ä»£ç å¯ä»¥æˆåŠŸç¼–è¯‘/æ„å»º

| æ£€æŸ¥é¡¹ | è¯´æ˜ | é˜ˆå€¼ |
|--------|------|------|
| é€€å‡ºç  | æ„å»ºå‘½ä»¤çš„è¿”å›å€¼ | 0 |
| æ„å»ºæ—¶é—´ | è¶…æ—¶æ£€æµ‹ | < 5åˆ†é’Ÿ |
| æ„å»ºæ—¥å¿— | æ”¶é›†æ‰€æœ‰é”™è¯¯å’Œè­¦å‘Š | - |

**æ‰§è¡Œç¤ºä¾‹**ï¼š
```bash
# JavaScript/TypeScript
npm run build

# Python
python -m build

# Rust
cargo build --release
```

**å¤±è´¥å¤„ç†**ï¼š
- é€€å‡ºç éé›¶ â†’ è§£ææ„å»ºé”™è¯¯ â†’ å®šä½æ–‡ä»¶å’Œè¡Œå· â†’ ä¿®å¤åé‡è¯•

---

### Stage 2: Type Checkï¼ˆç±»å‹æ£€æŸ¥ï¼‰

**ç›®æ ‡**ï¼šæ•è·ç±»å‹é”™è¯¯ï¼Œç¡®ä¿ç±»å‹å®‰å…¨

| æ£€æŸ¥é¡¹ | å·¥å…· | é˜ˆå€¼ |
|--------|------|------|
| TypeScript é”™è¯¯ | tsc --noEmit | 0 |
| Python ç±»å‹ | mypy/pyright | 0 |
| ç±»å‹è¦†ç›–ç‡ | -- | â‰¥ 90% |

**æ‰§è¡Œç¤ºä¾‹**ï¼š
```bash
# TypeScript
tsc --noEmit

# Python (mypy)
mypy src/ --strict

# Python (pyright)
pyright src/
```

**é”™è¯¯åˆ†ç±»**ï¼š
- ä¸¥é‡ï¼šç±»å‹ä¸åŒ¹é…ã€ç¼ºå°‘ç±»å‹æ³¨è§£
- è­¦å‘Šï¼šç±»å‹æ¨æ–­å¤±è´¥ã€any ç±»å‹ä½¿ç”¨

---

### Stage 3: Lint Checkï¼ˆä»£ç è§„èŒƒæ£€æŸ¥ï¼‰

**ç›®æ ‡**ï¼šç¡®ä¿ä»£ç ç¬¦åˆå›¢é˜Ÿè§„èŒƒ

| æ£€æŸ¥é¡¹ | å·¥å…· | é˜ˆå€¼ |
|--------|------|------|
| è¯­æ³•é”™è¯¯ | ESLint/Ruff | 0 |
| ä»£ç é£æ ¼è­¦å‘Š | - | â‰¤ 5 |
| å¤æ‚åº¦ | cyclomatic complexity | â‰¤ 15 |

**æ‰§è¡Œç¤ºä¾‹**ï¼š
```bash
# JavaScript/TypeScript
eslint src/ --max-warnings 5

# Python
ruff check src/ --warning-level

# Rust
cargo clippy -- -D warnings
```

**è­¦å‘Šå®¹å¿åº¦**ï¼š
- 0-5ï¼šå¯æ¥å—ï¼Œè®°å½•æ—¥å¿—
- 6-10ï¼šéœ€è¦ review
- >10ï¼šå¿…é¡»ä¿®å¤

---

### Stage 4: Test Suiteï¼ˆæµ‹è¯•å¥—ä»¶ï¼‰

**ç›®æ ‡**ï¼šéªŒè¯åŠŸèƒ½æ­£ç¡®æ€§

| æ£€æŸ¥é¡¹ | é˜ˆå€¼ | è¯´æ˜ |
|--------|------|------|
| æµ‹è¯•é€šè¿‡ç‡ | 100% | 0 å¤±è´¥ |
| ä»£ç è¦†ç›–ç‡ | â‰¥ 80% | æ•´ä½“è¦†ç›–ç‡ |
| å…³é”®è·¯å¾„è¦†ç›–ç‡ | 100% | æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ |
| æµ‹è¯•æ‰§è¡Œæ—¶é—´ | < 3åˆ†é’Ÿ | - |

**æ‰§è¡Œç¤ºä¾‹**ï¼š
```bash
# JavaScript
npm test -- --coverage

# Python
pytest --cov=src --cov-fail-under=80

# Rust
cargo test --coverage
```

**æµ‹è¯•åˆ†å±‚**ï¼š
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  E2E Tests (ç«¯åˆ°ç«¯)     10%         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Integration Tests (é›†æˆ)  30%      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Unit Tests (å•å…ƒ)      60%         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Stage 5: Security Scanï¼ˆå®‰å…¨æ‰«æï¼‰

**ç›®æ ‡**ï¼šæ£€æµ‹å®‰å…¨æ¼æ´å’Œæ•æ„Ÿä¿¡æ¯æ³„éœ²

| æ£€æŸ¥é¡¹ | è¯´æ˜ | é˜ˆå€¼ |
|--------|------|------|
| æ•æ„Ÿä¿¡æ¯ | API Keyã€å¯†ç ã€Token | 0 |
| è°ƒè¯•ä»£ç  | console.logã€debugger | 0 |
| ä¾èµ–æ¼æ´ | å·²çŸ¥ CVE æ¼æ´ | 0 é«˜å± |
| SQL æ³¨å…¥ | åŠ¨æ€æ‹¼æ¥æŸ¥è¯¢ | 0 |
| XSS é£é™© | ç”¨æˆ·è¾“å…¥æœªè½¬ä¹‰ | 0 |

**æ‰§è¡Œç¤ºä¾‹**ï¼š
```bash
# æ•æ„Ÿä¿¡æ¯æ£€æµ‹
git-secrets scans

# ä¾èµ–æ¼æ´
npm audit
# æˆ–
safety check

# ä»£ç å®‰å…¨æ‰«æ
semgrep --config=auto
```

**æ•æ„Ÿæ¨¡å¼æ£€æµ‹**ï¼š
```javascript
// âŒ æ£€æµ‹åˆ°æ•æ„Ÿä¿¡æ¯
const API_KEY = "sk-1234567890"
const password = "admin123"

// âŒ æ£€æµ‹åˆ°è°ƒè¯•ä»£ç 
console.log(data)
debugger

// âœ… æ­£ç¡®åšæ³•
const API_KEY = process.env.API_KEY
logger.debug(data)
```

---

### Stage 6: Functional Verificationï¼ˆåŠŸèƒ½éªŒè¯ï¼‰â­

**ç›®æ ‡**ï¼šå¯¹ç…§éœ€æ±‚æŒ‡çº¹ï¼Œé€é¡¹éªŒè¯åŠŸèƒ½å®ç°

### éªŒè¯æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    åŠŸèƒ½éªŒè¯æµç¨‹                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ éœ€æ±‚æŒ‡çº¹æå– â”‚ â”€â”€ â”‚ åŠŸèƒ½é€é¡¹éªŒè¯ â”‚ â”€â”€ â”‚ è¦†ç›–ç‡è®¡ç®— â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚         â”‚                   â”‚                   â”‚          â”‚
â”‚         â–¼                   â–¼                   â–¼          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ â€¢ æ ¸å¿ƒåŠŸèƒ½   â”‚    â”‚ â€¢ å®ç°æ£€æŸ¥   â”‚    â”‚ â€¢ å®Œæˆåº¦   â”‚    â”‚
â”‚  â”‚ â€¢ è¾¹ç•Œæ¡ä»¶   â”‚    â”‚ â€¢ è¾¹ç•Œæµ‹è¯•   â”‚    â”‚ â€¢ ç¼ºå¤±é¡¹   â”‚    â”‚
â”‚  â”‚ â€¢ é”™è¯¯å¤„ç†   â”‚    â”‚ â€¢ å¼‚å¸¸æµç¨‹   â”‚    â”‚ â€¢ é£é™©é¡¹   â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### éªŒè¯æ¸…å•æ¨¡æ¿

| éœ€æ±‚é¡¹ | çŠ¶æ€ | éªŒè¯æ–¹å¼ | å¤‡æ³¨ |
|--------|------|----------|------|
| æ ¸å¿ƒåŠŸèƒ½ A | âœ…/âŒ | ä»£ç å®¡æŸ¥ + æµ‹è¯• | - |
| è¾¹ç•Œæ¡ä»¶ B | âœ…/âŒ | è¾¹ç•Œå€¼æµ‹è¯• | - |
| é”™è¯¯å¤„ç† C | âœ…/âŒ | å¼‚å¸¸æ³¨å…¥æµ‹è¯• | - |
| æ€§èƒ½è¦æ±‚ D | âœ…/âŒ | æ€§èƒ½æµ‹è¯• | - |

### éªŒè¯ç»´åº¦

**1. æ ¸å¿ƒåŠŸèƒ½éªŒè¯**
```
éœ€æ±‚ï¼šç”¨æˆ·ç™»å½•åŠŸèƒ½
éªŒè¯é¡¹ï¼š
â”œâ”€â”€ æ­£å¸¸ç™»å½•æµç¨‹ âœ…
â”œâ”€â”€ å¯†ç é”™è¯¯å¤„ç† âœ…
â”œâ”€â”€ è´¦å·ä¸å­˜åœ¨å¤„ç† âœ…
â”œâ”€â”€ ç™»å½•çŠ¶æ€ä¿æŒ âœ…
â””â”€â”€ ç™»å‡ºåŠŸèƒ½ âœ…
```

**2. è¾¹ç•Œæ¡ä»¶éªŒè¯**
```
éœ€æ±‚ï¼šæ–‡ä»¶ä¸Šä¼ åŠŸèƒ½
éªŒè¯é¡¹ï¼š
â”œâ”€â”€ ç©ºæ–‡ä»¶å¤„ç† âœ…
â”œâ”€â”€ è¶…å¤§æ–‡ä»¶å¤„ç† âœ…
â”œâ”€â”€ ç‰¹æ®Šå­—ç¬¦æ–‡ä»¶å âœ…
â”œâ”€â”€ å¹¶å‘ä¸Šä¼  âœ…
â””â”€â”€ ç½‘ç»œä¸­æ–­æ¢å¤ âœ…
```

**3. é”™è¯¯å¤„ç†éªŒè¯**
```
éªŒè¯é¡¹ï¼š
â”œâ”€â”€ API é”™è¯¯å“åº”å¤„ç† âœ…
â”œâ”€â”€ ç½‘ç»œè¶…æ—¶å¤„ç† âœ…
â”œâ”€â”€ æ•°æ®æ ¼å¼å¼‚å¸¸å¤„ç† âœ…
â”œâ”€â”€ æƒé™ä¸è¶³å¤„ç† âœ…
â””â”€â”€ èµ„æºä¸è¶³å¤„ç† âœ…
```

---

### Stage 7: User Acceptance Previewï¼ˆç”¨æˆ·éªŒæ”¶é¢„è§ˆï¼‰â­

**ç›®æ ‡**ï¼šç”Ÿæˆç”¨æˆ·å¯ç†è§£çš„éªŒæ”¶æ¸…å•

### éªŒæ”¶æŠ¥å‘Šæ ¼å¼

```markdown
# ç”¨æˆ·éªŒæ”¶é¢„è§ˆæŠ¥å‘Š

## ğŸ“‹ éªŒæ”¶æ¸…å•

### âœ… å·²å®ŒæˆåŠŸèƒ½
- [x] ç”¨æˆ·å¯ä»¥æˆåŠŸæ³¨å†Œè´¦å·
- [x] ç”¨æˆ·å¯ä»¥ç™»å½•ç³»ç»Ÿ
- [x] ç”¨æˆ·å¯ä»¥ç¼–è¾‘ä¸ªäººèµ„æ–™

### âš ï¸ éƒ¨åˆ†å®ŒæˆåŠŸèƒ½
- [~] å¯†ç æ‰¾å›åŠŸèƒ½ï¼ˆé‚®ä»¶å‘é€æ­£å¸¸ï¼Œä½†é“¾æ¥æœ‰æ•ˆæœŸæœªå®ç°ï¼‰

### âŒ æœªå®ŒæˆåŠŸèƒ½
- [ ] ç¬¬ä¸‰æ–¹ç™»å½•åŠŸèƒ½ï¼ˆä¾èµ–å¤–éƒ¨ API è°ƒæ•´ï¼‰
- [ ] æ¶ˆæ¯æ¨é€åŠŸèƒ½ï¼ˆç­‰å¾…åç«¯æ¥å£ï¼‰

## ğŸ” æ½œåœ¨é—®é¢˜
1. é«˜å¹¶å‘ä¸‹å¯èƒ½å‡ºç°æ•°æ®ä¸ä¸€è‡´ï¼ˆå·²æ ‡è®°ï¼Œå¾…ä¼˜åŒ–ï¼‰
2. ç§»åŠ¨ç«¯ Safari æµè§ˆå™¨å­˜åœ¨æ ·å¼å…¼å®¹é—®é¢˜

## ğŸ“– ä½¿ç”¨è¯´æ˜
### å¦‚ä½•æµ‹è¯•ç™»å½•åŠŸèƒ½
1. è®¿é—® http://localhost:3000/login
2. è¾“å…¥æµ‹è¯•è´¦å·ï¼štest@example.com
3. è¾“å…¥å¯†ç ï¼šTest1234!
4. ç‚¹å‡»ç™»å½•æŒ‰é’®

### æ³¨æ„äº‹é¡¹
- é¦–æ¬¡ä½¿ç”¨éœ€è¦é…ç½®ç¯å¢ƒå˜é‡
- é»˜è®¤ç«¯å£ä¸º 3000ï¼Œå¯åœ¨é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹

## ğŸ“Š æ•´ä½“å®Œæˆåº¦
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘  85%          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
```

### éªŒæ”¶æ ‡å‡†

| å®Œæˆåº¦ | è¯„çº§ | è¯´æ˜ |
|--------|------|------|
| â‰¥ 90% | A | å¯ç›´æ¥éªŒæ”¶ |
| 75-89% | B | å°å¹…ä¿®æ”¹åå¯éªŒæ”¶ |
| 60-74% | C | éœ€è¦è¡¥å……å¼€å‘ |
| < 60% | D | ä¸å¯éªŒæ”¶ |

---

## 3. ç½®ä¿¡åº¦é‡åŒ–ç³»ç»Ÿ

### Agent å†³ç­–ç½®ä¿¡åº¦åˆ†çº§

| ç½®ä¿¡åº¦èŒƒå›´ | çº§åˆ« | è¡ŒåŠ¨ç­–ç•¥ |
|------------|------|----------|
| 0.9 - 1.0 | éå¸¸ç¡®ä¿¡ | å¯ç›´æ¥æ‰§è¡Œï¼Œæ— éœ€äººå·¥ç¡®è®¤ |
| 0.7 - 0.9 | è¾ƒç¡®ä¿¡ | å»ºè®® review åæ‰§è¡Œ |
| 0.5 - 0.7 | ä¸€èˆ¬ç¡®ä¿¡ | å¿…é¡» review åæ‰§è¡Œ |
| < 0.5 | ä¸ç¡®å®š | éœ€è¦äººå·¥å¹²é¢„æˆ–æ›´å¤šä¸Šä¸‹æ–‡ |

### ä»»åŠ¡æ•´ä½“ç½®ä¿¡åº¦è®¡ç®—

```typescript
/**
 * è®¡ç®—ä»»åŠ¡æ•´ä½“ç½®ä¿¡åº¦
 * @param factors å„ç»´åº¦ç½®ä¿¡åº¦å› å­
 * @returns æ•´ä½“ç½®ä¿¡åº¦ (0-1)
 */
function calculateOverallConfidence(factors: ConfidenceFactors): number {
  const weights = {
    stage1: 0.10,  // Build Check
    stage2: 0.10,  // Type Check
    stage3: 0.05,  // Lint Check
    stage4: 0.25,  // Test Suite
    stage5: 0.15,  // Security Scan
    stage6: 0.25,  // Functional Verification
    stage7: 0.10,  // User Acceptance Preview
  };

  let confidence = 0;

  // åŠ æƒå¹³å‡
  for (const [stage, weight] of Object.entries(weights)) {
    const stageScore = factors[stage as keyof ConfidenceFactors] ?? 0;
    confidence += stageScore * weight;
  }

  // å…³é”®é˜¶æ®µä¸€ç¥¨å¦å†³
  if (factors.stage4 < 0.5 || factors.stage6 < 0.5) {
    confidence = Math.min(confidence, 0.4);
  }

  // å®‰å…¨æ¼æ´ç›´æ¥é™ä¸ºæœ€ä½
  if (factors.stage5 < 1.0) {
    confidence = Math.min(confidence, 0.3);
  }

  return Math.round(confidence * 1000) / 1000;
}

/**
 * å•é˜¶æ®µç½®ä¿¡åº¦è®¡ç®—
 */
interface ConfidenceFactors {
  stage1: number;  // æ„å»ºæˆåŠŸ: 1, å¤±è´¥: 0
  stage2: number;  // 1 - (ç±»å‹é”™è¯¯æ•° / æ€»è¡Œæ•° * 10)
  stage3: number;  // 1 - (è­¦å‘Šæ•° / 20)
  stage4: number;  // æµ‹è¯•é€šè¿‡ç‡ * è¦†ç›–ç‡æƒé‡
  stage5: number;  // 1 - (é«˜å±æ¼æ´æ•° * 0.5)
  stage6: number;  // åŠŸèƒ½å®Œæˆåº¦
  stage7: number;  // éªŒæ”¶é€šè¿‡åº¦
}

// ç¤ºä¾‹è®¡ç®—
const exampleFactors: ConfidenceFactors = {
  stage1: 1.0,     // æ„å»ºæˆåŠŸ
  stage2: 1.0,     // æ— ç±»å‹é”™è¯¯
  stage3: 0.9,     // 2 ä¸ªè­¦å‘Š
  stage4: 0.95,    // æµ‹è¯•å…¨éƒ¨é€šè¿‡ï¼Œè¦†ç›–ç‡ 95%
  stage5: 1.0,     // æ— å®‰å…¨æ¼æ´
  stage6: 0.85,    // åŠŸèƒ½å®Œæˆ 85%
  stage7: 0.90,    // éªŒæ”¶è¯„åˆ† 90%
};

const overallConfidence = calculateOverallConfidence(exampleFactors);
console.log(`æ•´ä½“ç½®ä¿¡åº¦: ${overallConfidence}`); // 0.945
```

### ç½®ä¿¡åº¦é˜ˆå€¼å¤„ç†æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç½®ä¿¡åº¦é˜ˆå€¼å¤„ç†æµç¨‹                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚   ç½®ä¿¡åº¦ â‰¥ 0.9                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
â”‚   â”‚ âœ… ç›´æ¥æ‰§è¡Œ      â”‚ â†’ è‡ªåŠ¨éƒ¨ç½²/æäº¤                       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â”‚           â†“                                                 â”‚
â”‚   0.7 â‰¤ ç½®ä¿¡åº¦ < 0.9                                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
â”‚   â”‚ âš ï¸ å»ºè®® Review  â”‚ â†’ ç”ŸæˆæŠ¥å‘Š â†’ ç­‰å¾…ç¡®è®¤                â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â”‚           â†“                                                 â”‚
â”‚   0.5 â‰¤ ç½®ä¿¡åº¦ < 0.7                                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
â”‚   â”‚ ğŸ›‘ å¿…é¡» Review   â”‚ â†’ é˜»å¡æ‰§è¡Œ â†’ å¼ºåˆ¶äººå·¥å®¡æŸ¥            â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â”‚           â†“                                                 â”‚
â”‚   ç½®ä¿¡åº¦ < 0.5                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
â”‚   â”‚ â›”å›æ»šç¨³å®šçŠ¶æ€   â”‚ â†’ ä¸­æ­¢ä»»åŠ¡ â†’ å›æ»š â†’ éœ€è¦åˆ†æ          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä½ç½®ä¿¡åº¦å¤„ç†ç­–ç•¥

| ç½®ä¿¡åº¦ | å¤„ç†ç­–ç•¥ | ç”¨æˆ·é€šçŸ¥ |
|--------|----------|----------|
| < 0.5 | ç«‹å³å›æ»šï¼Œä¸­æ­¢ä»»åŠ¡ | "ç½®ä¿¡åº¦è¿‡ä½ï¼Œå·²å›æ»šåˆ°ç¨³å®šçŠ¶æ€ï¼Œè¯·æ£€æŸ¥é—®é¢˜" |
| 0.5-0.7 | æš‚åœæ‰§è¡Œï¼Œç­‰å¾…äººå·¥ç¡®è®¤ | "ç½®ä¿¡åº¦ä¸€èˆ¬ï¼Œéœ€è¦æ‚¨ç¡®è®¤æ˜¯å¦ç»§ç»­" |
| 0.7-0.9 | ç»§ç»­æ‰§è¡Œï¼Œä½†æ ‡æ³¨é£é™© | "ç½®ä¿¡åº¦è‰¯å¥½ï¼Œå­˜åœ¨å°é£é™©ï¼Œå»ºè®®æŸ¥çœ‹æŠ¥å‘Š" |

---

## 4. éªŒè¯è¾“å‡ºæ ¼å¼

### éªŒè¯æŠ¥å‘Šæ¨¡æ¿

```markdown
# éªŒè¯æŠ¥å‘Š

## ğŸ“Š æ€»è§ˆ

| æŒ‡æ ‡ | ç»“æœ | çŠ¶æ€ |
|------|------|------|
| æ•´ä½“ç½®ä¿¡åº¦ | 0.945 | âœ… ä¼˜ç§€ |
| æ„å»ºçŠ¶æ€ | æˆåŠŸ | âœ… |
| ç±»å‹æ£€æŸ¥ | é€šè¿‡ | âœ… |
| ä»£ç è§„èŒƒ | 2 è­¦å‘Š | âš ï¸ |
| æµ‹è¯•é€šè¿‡ç‡ | 100% (95% è¦†ç›–ç‡) | âœ… |
| å®‰å…¨æ‰«æ | æ— æ¼æ´ | âœ… |
| åŠŸèƒ½å®Œæˆåº¦ | 85% | âš ï¸ |
| éªŒæ”¶è¯„åˆ† | 90% | âœ… |

---

## ğŸ” è¯¦ç»†ç»“æœ

### Stage 1: Build Check
- **çŠ¶æ€**: âœ… é€šè¿‡
- **è€—æ—¶**: 2.3s
- **è¾“å‡º**: æ— é”™è¯¯

### Stage 2: Type Check
- **çŠ¶æ€**: âœ… é€šè¿‡
- **å·¥å…·**: tsc --noEmit
- **ç»“æœ**: 0 é”™è¯¯

### Stage 3: Lint Check
- **çŠ¶æ€**: âš ï¸ è­¦å‘Š
- **å·¥å…·**: ESLint
- **è­¦å‘Š**:
  - src/utils/helper.ts:42:7 - unused variable 'temp' (fixable)
  - src/api/client.ts:15:5 - prefer-const

### Stage 4: Test Suite
- **çŠ¶æ€**: âœ… é€šè¿‡
- **æµ‹è¯•**: 127 passed, 0 failed
- **è¦†ç›–ç‡**: 95.2% (Statements), 93.8% (Branches)

### Stage 5: Security Scan
- **çŠ¶æ€**: âœ… é€šè¿‡
- **æ‰«æé¡¹**:
  - æ•æ„Ÿä¿¡æ¯: 0 å‘ç°
  - è°ƒè¯•ä»£ç : 0 å‘ç°
  - ä¾èµ–æ¼æ´: 0 é«˜å±, 2 ä¸­å±ï¼ˆå·²å‡çº§ï¼‰

### Stage 6: Functional Verification
- **çŠ¶æ€**: âš ï¸ éƒ¨åˆ†å®Œæˆ
- **å®Œæˆåº¦**: 85%
- **ç¼ºå¤±åŠŸèƒ½**:
  - [ ] ç¬¬ä¸‰æ–¹ç™»å½•é›†æˆ
  - [ ] å¯¼å‡ºåŠŸèƒ½ï¼ˆæ ¼å¼è½¬æ¢æœªå®ç°ï¼‰

### Stage 7: User Acceptance Preview
- **çŠ¶æ€**: âœ… å¯éªŒæ”¶
- **è¯„åˆ†**: A-
- **ç”¨æˆ·åé¦ˆ**: æ ¸å¿ƒåŠŸèƒ½å®Œæ•´ï¼Œè¾¹ç¼˜åœºæ™¯éœ€è¡¥å……

---

## âš ï¸ é£é™©æç¤º

1. **ä¸­ç­‰é£é™©**: å­˜åœ¨ 2 ä¸ªä¸­å±ä¾èµ–æ¼æ´ï¼Œå»ºè®®å‡çº§
2. **ä½é£é™©**: 2 ä¸ªä»£ç è§„èŒƒè­¦å‘Šï¼Œå¯è‡ªåŠ¨ä¿®å¤

---

## âœ… å»ºè®®æ“ä½œ

1. ä¿®å¤ ESLint è­¦å‘Š
2. è¡¥å……ç¬¬ä¸‰æ–¹ç™»å½•åŠŸèƒ½
3. å‡çº§ä¸­å±ä¾èµ–åŒ…
4. å®Œæˆåé‡æ–°éªŒè¯

ç½®ä¿¡åº¦ 0.945 â‰¥ 0.9ï¼Œå»ºè®®ç»§ç»­æ‰§è¡Œï¼Œä½†æ³¨æ„ä¸Šè¿°é£é™©é¡¹ã€‚
```

---

## 5. éªŒè¯å¤±è´¥å¤„ç†æµç¨‹

```mermaid
flowchart TD
    Start([å¼€å§‹éªŒè¯]) --> Stage1[Stage 1: Build Check]

    Stage1 -->|å¤±è´¥| Fix1[ä¿®å¤æ„å»ºé”™è¯¯]
    Fix1 --> Stage1
    Stage1 -->|é€šè¿‡| Stage2[Stage 2: Type Check]

    Stage2 -->|å¤±è´¥| Fix2[ä¿®å¤ç±»å‹é”™è¯¯]
    Fix2 --> Stage2
    Stage2 -->|é€šè¿‡| Stage3[Stage 3: Lint Check]

    Stage3 -->|è­¦å‘Š>5| Fix3[ä¿®å¤è§„èŒƒé—®é¢˜]
    Fix3 --> Stage3
    Stage3 -->|é€šè¿‡/å¯å®¹å¿| Stage4[Stage 4: Test Suite]

    Stage4 -->|æµ‹è¯•å¤±è´¥| Fix4[ä¿®å¤æµ‹è¯•]
    Fix4 --> Stage4
    Stage4 -->|è¦†ç›–ç‡<80%| Enhance4[è¡¥å……æµ‹è¯•]
    Enhance4 --> Stage4
    Stage4 -->|é€šè¿‡| Stage5[Stage 5: Security Scan]

    Stage5 -->|å‘ç°æ¼æ´| Fix5[ä¿®å¤å®‰å…¨é—®é¢˜]
    Fix5 --> Stage5
    Stage5 -->|é€šè¿‡| Stage6[Stage 6: Functional Verification]

    Stage6 -->|åŠŸèƒ½ç¼ºå¤±| Dev6[è¡¥å……åŠŸèƒ½]
    Dev6 --> Stage6
    Stage6 -->|è¾¹ç•Œæœªè¦†ç›–| Edge6[è¡¥å……è¾¹ç•Œæµ‹è¯•]
    Edge6 --> Stage6
    Stage6 -->|é€šè¿‡| Stage7[Stage 7: User Acceptance Preview]

    Stage7 -->|éªŒæ”¶ä¸é€šè¿‡| UAT7[ä¿®å¤/è¡¥å……]
    UAT7 --> Stage7

    Stage7 -->|é€šè¿‡| CalcConf[è®¡ç®—æ•´ä½“ç½®ä¿¡åº¦]

    CalcConf -->|ç½®ä¿¡åº¦<0.5| Rollback[å›æ»šåˆ°ç¨³å®šçŠ¶æ€]
    Rollback --> NotifyUser[é€šçŸ¥ç”¨æˆ·]

    CalcConf -->|0.5â‰¤ç½®ä¿¡åº¦<0.7| Block[é˜»å¡ç­‰å¾…ç¡®è®¤]
    Block --> NotifyUser

    CalcConf -->|0.7â‰¤ç½®ä¿¡åº¦<0.9| Warning[æ ‡æ³¨é£é™©ç»§ç»­]
    Warning --> Report[ç”ŸæˆéªŒè¯æŠ¥å‘Š]

    CalcConf -->|ç½®ä¿¡åº¦â‰¥0.9| Direct[ç›´æ¥æ‰§è¡Œ]
    Direct --> Report

    Report --> End([å®Œæˆ])
    NotifyUser --> End
```

### å¤±è´¥å¤„ç†å†³ç­–æ ‘

```
éªŒè¯å¤±è´¥
    â”‚
    â”œâ”€ æ„å»ºå¤±è´¥
    â”‚   â””â”€ è§£æé”™è¯¯ â†’ å®šä½ä½ç½® â†’ è‡ªåŠ¨ä¿®å¤ï¼ˆå¦‚å¯èƒ½ï¼‰â†’ é‡è¯•
    â”‚                  â””â”€ æ— æ³•è‡ªåŠ¨ä¿®å¤ â†’ é€šçŸ¥ç”¨æˆ·
    â”‚
    â”œâ”€ ç±»å‹æ£€æŸ¥å¤±è´¥
    â”‚   â””â”€ åˆ—å‡ºç±»å‹é”™è¯¯ â†’ æä¾›ä¿®å¤å»ºè®® â†’ ç­‰å¾…ç¡®è®¤
    â”‚
    â”œâ”€ æµ‹è¯•å¤±è´¥
    â”‚   â”œâ”€ å•å…ƒæµ‹è¯•å¤±è´¥ â†’ ä¿®å¤ä»£ç  â†’ é‡è·‘æµ‹è¯•
    â”‚   â””â”€ è¦†ç›–ç‡ä¸è¶³ â†’ è¡¥å……æµ‹è¯•ç”¨ä¾‹
    â”‚
    â”œâ”€ å®‰å…¨æ‰«æå¤±è´¥
    â”‚   â”œâ”€ æ•æ„Ÿä¿¡æ¯ â†’ ç«‹å³ç§»é™¤ â†’ å¼ºåˆ¶é‡ç½®å‡­è¯
    â”‚   â”œâ”€ è°ƒè¯•ä»£ç  â†’ ç§»é™¤/æ”¹ä¸º logger
    â”‚   â””â”€ ä¾èµ–æ¼æ´ â†’ å‡çº§ç‰ˆæœ¬ â†’ æ›¿ä»£æ–¹æ¡ˆ
    â”‚
    â”œâ”€ åŠŸèƒ½éªŒè¯å¤±è´¥
    â”‚   â””â”€ å¯¹æ¯”éœ€æ±‚æŒ‡çº¹ â†’ åˆ—å‡ºç¼ºå¤± â†’ å¼€å‘è¡¥å……
    â”‚
    â””â”€ éªŒæ”¶é¢„è§ˆå¤±è´¥
        â””â”€ ç”¨æˆ·è§†è§’é—®é¢˜ â†’ ä¿®å¤ UX â†’ ä¼˜åŒ–æµç¨‹
```

---

## 6. é™„å½•

### A. å·¥å…·æ¨è

| ç±»åˆ« | TypeScript | Python | Rust |
|------|-----------|--------|------|
| æ„å»º | tsc, webpack, vite | build, hatch | cargo |
| ç±»å‹ | tsc | mypy, pyright | rustc |
| è§„èŒƒ | ESLint, Prettier | Ruff, Black | clippy |
| æµ‹è¯• | Jest, Vitest | pytest | cargo test |
| è¦†ç›–ç‡ | c8, istanbul | pytest-cov | tarpaulin |
| å®‰å…¨ | eslint-plugin-security | bandit, safety | cargo-audit |

### B. é…ç½®ç¤ºä¾‹

**package.json (TypeScript)**
```json
{
  "scripts": {
    "build": "tsc && vite build",
    "type-check": "tsc --noEmit",
    "lint": "eslint src/ --max-warnings 5",
    "test": "vitest --coverage",
    "verify": "npm run build && npm run type-check && npm run lint && npm run test"
  }
}
```

**pyproject.toml (Python)**
```toml
[tool.mypy]
strict = true
warn_return_any = true
warn_unused_configs = true

[tool.ruff]
line-length = 100
select = ["E", "F", "W", "I"]

[tool.pytest.ini_options]
min_coverage = 80
```

---

## ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´ |
|------|------|------|
| 1.0 | 2025-01 | åˆå§‹ç‰ˆæœ¬ (6é˜¶æ®µ) |
| 2.0 | 2025-02 | æ–°å¢ Stage 6/7ï¼Œå¢å¼ºç½®ä¿¡åº¦ç³»ç»Ÿ |

---

*æœ¬æ–‡æ¡£éµå¾ªä¼¯å…‹åˆ©è½¯ä»¶å·¥ç¨‹éªŒè¯ç ”ç©¶æ ‡å‡†*
